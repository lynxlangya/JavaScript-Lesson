# 对象

## 1. 概述

### 1.1 生成方法

对象(object)是 JavaScript 语言的核心概念,也是最重要的数据类型

简单说,对象就是一组 "键值对" (key-value) 的集合,是一种无需的复合数据集合.

```js
let obj = {
    foo: 'Hello',
    bar: 'World'
};
```

上面代码中,大括号就定义了一个对象,它被赋值给变量 `obj`, 所以变量 `obj` 就指向一个对象. 该对象内部包含两个键值对 (又称两个"成员"),第一个键值对是 `foo: 'Hello'`, 其中 `foo` 是"键名"(成员的名称),字符串 `Hello` 是"键值"(成员的值).键名与键值之间用冒号分割.第二个键值对是 `bar: 'World'`, `bar` 是键名, `World` 是键值.两个键值对之间用逗号隔开.

对象的每一个键名又称 "属性(property)",它的"键值"可以是任何数据类型,如果一个属性的值为函数,通常把这个属性称为"方法",它可以像函数那样调用.

### 1.2 键名

对象的所有键名都是字符串(ES6 又引入了 Symbol 值也可以作为键名),所以加不加引号都可以,如果键名是数值,会被自动转为字符串.如果键名不符合标示名的条件,且也不是数字,则必须加上引号,否则就会报错.

### 1.3 对象的引用

如果不同的变量名指向同一个对象,那么它们都是这个对象的引用,也就是说指向同一个内存地址.修改其中一个变量,会影响到其他所有变量.

## 2.属性的操作

### 2.1 属性的读取

读取对象的属性,有两种方法,一种是使用点运算符,还有一种是使用方括号运算符.

```js
let obj = {
    p: 'Hello World'
};

obj.p           // "Hello World"
obj['p']        // "Hello World"
```

如果使用方括号运算符,键名必须放在引号里面,否则会被当做变量处理,数字键可以不加引号,因为会被自动转为字符串.

### 2.2 属性的赋值

点运算符和方括号运算符,不仅可以用来读取值,还可以用来赋值.

```js
let obj = {};

obj.foo = 'Hello';
obj['bar'] = 'World';
```

上面代码中,分别使用点运算符和方括号运算符,对属性赋值.

JavaScript 允许属性的"后绑定",也就是说,你可以在任意时刻新增属性,没必要在定义对象的时候,就定义好属性.

```js
let obj = { p: 1 };

// 等同于

let obj = {};
obj.p = 1;
```

### 2.3 属性的查看

查看一个对象本身的所有属性,可以使用 `Object.keys` 方法.

```js
let obj = {
    key1: 1,
    key2: 2
};

Object.keys(obj);       // ['key1', 'key2']
```

### 2.4 属性的删除: delete 命令

`delete` 命令用于删除对象的属性,删除成功后返回 `true`.注意,如果是删除一个不存在的属性, `delete` 不报错,而是返回 `true`.

只有一种情况, `delete` 命令会返回 `false` ,那就是该属性存在,且不得删除.

```js
let obj = Object.defineProperty({}, 'p', {
    value: 123,
    configurable: false
});

obj.p           // 123
delete obj.p    // false
```

上面代码之中,对象 `obj` 的 `p` 属性是不能删除的,所以 `delete` 命令返回 `false`.

另外,需要注意的是, `delete` 命令只能删除对象本身的属性,无法删除继承的属性

### 2.5 属性是否存在: in 运算符

`in` 运算符用于检查对象是否包含某个属性(检查的是键名,不是键值),如果包含就返回 `true`, 否则返回 `false`. 它的左边是一个字符串,表示属性名,右边是一个对象.

```js
let obj = { p: 1 };
'p' in obj          // true
'toString' in obj   // true
```

### 2.6 属性的遍历: for...in 循环

`for...in` 循环用来遍历一个对象的全部属性

```js
let obj = {a:1, b:2, c:3};

for (let i in obj) {
    console.log('键名:', i);
    console.log('键值:', obj[i]);
}

// 键名： a
// 键值： 1
// 键名： b
// 键值： 2```
// 键名： c
// 键值： 3
```

`for...in` 循环有两个使用注意点

- 它遍历的是对象所有可遍历(enumerable)的属性,会跳过不可比案例的属性.
- 它不仅遍历对象自身的属性,还遍历继承的属性.

## 3. with 语句

`with` 语句的格式如下:

```js
with (对象) {
    语句;
}
```

注意,如果 `with` 区块内部有变量的赋值操作,必须是当前对象已经存在的属性,否则会创造一个当前作用域的全局变量.
